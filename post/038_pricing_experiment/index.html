<!doctype html><!-- This site was created with Wowchemy. https://www.wowchemy.com --><!-- Last Published: March 6, 2025 --><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=generator content="Wowchemy 5.7.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Lora&family=Work+Sans&family=Montserrat:wght@400;700&family=Roboto+Mono:wght@400;700&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Lora&family=Work+Sans&family=Montserrat:wght@400;700&family=Roboto+Mono:wght@400;700&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><script src=/js/mathjax-config.js></script><link rel=stylesheet href=/css/vendor-bundle.min.047268c6dd09ad74ba54a0ba71837064.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/academicons@1.9.2/css/academicons.min.css integrity="sha512-KlJCpRsLf+KKu2VQa5vmRuClRFjxc5lXO03ixZt82HZUk41+1I0bD8KBSA0fY290ayMfWYI9udIqeOWSu1/uZg==" crossorigin=anonymous media=print onload='this.media="all"'><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js integrity crossorigin=anonymous async></script><link rel=stylesheet href=/css/wowchemy.176e9a6c2874fb96332dfb10e8718f70.css><link rel=stylesheet href=/css/libs/chroma/github-dark.min.css title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=/css/libs/chroma/github-dark.min.css title=hl-dark media=print onload='this.media="all"' disabled><meta name=author content="Wit Sirawit"><meta name=description content="In the world of e-commerce, hundreds of pricing strategies or campaigns are being run simultaneously. But how do these campaigns get validated and tested before rolling out to the users? &ndash; Experimentation"><link rel=alternate hreflang=en-us href=https://witsblog.github.io/post/038_pricing_experiment/><link rel=canonical href=https://witsblog.github.io/post/038_pricing_experiment/><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu66cf44b0d2eab4dae9de00f68d847da7_1567_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu66cf44b0d2eab4dae9de00f68d847da7_1567_180x180_fill_lanczos_center_3.png><meta name=theme-color content="#2962ff"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:image" content="https://witsblog.github.io/post/038_pricing_experiment/featured.png"><meta property="og:site_name" content="Wit's Blog"><meta property="og:url" content="https://witsblog.github.io/post/038_pricing_experiment/"><meta property="og:title" content="Pricing Experimentation | Wit's Blog"><meta property="og:description" content="In the world of e-commerce, hundreds of pricing strategies or campaigns are being run simultaneously. But how do these campaigns get validated and tested before rolling out to the users? &ndash; Experimentation"><meta property="og:image" content="https://witsblog.github.io/post/038_pricing_experiment/featured.png"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2024-01-13T00:00:00+00:00"><meta property="article:modified_time" content="2024-01-13T00:00:00+00:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://witsblog.github.io/post/038_pricing_experiment/"},"headline":"Pricing Experimentation","image":["https://witsblog.github.io/post/038_pricing_experiment/featured.png"],"datePublished":"2024-01-13T00:00:00Z","dateModified":"2024-01-13T00:00:00Z","author":{"@type":"Person","name":"Wit Sirawit"},"publisher":{"@type":"Organization","name":"Wit's Blog","logo":{"@type":"ImageObject","url":"https://witsblog.github.io/media/icon_hu66cf44b0d2eab4dae9de00f68d847da7_1567_192x192_fill_lanczos_center_3.png"}},"description":"In the world of e-commerce, hundreds of pricing strategies or campaigns are being run simultaneously. But how do these campaigns get validated and tested before rolling out to the users? \u0026ndash; Experimentation"}</script><title>Pricing Experimentation | Wit's Blog</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=c0899b600303c4ef8f8835010f5ddecd><script src=/js/wowchemy-init.min.fe8634e7d00f14d07fb33caf14cc8e55.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=Search...></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><div class="page-header header--fixed"><header><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Wit's Blog</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Wit's Blog</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/#posts><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#about><span>About</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/#gallery><span>Gallery</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a></li></ul></div></nav></header></div><div class=page-body><article class=article><div class="article-container pt-3"><h1>Pricing Experimentation</h1><div class=article-metadata><span class=article-date>Jan 13, 2024
</span><span class=middot-divider></span>
<span class=article-reading-time>3 min read</span></div></div><div class="article-header container featured-image-wrapper mt-4 mb-4" style=max-width:884px;max-height:403px><div style=position:relative><img src=/post/038_pricing_experiment/featured_hu8a1df53b014a6b897d556bed7ebf69e4_61842_1200x2500_fit_q75_h2_lanczos_3.webp width=884 height=403 alt class=featured-image></div></div><div class="container-fluid docs"><div class="row flex-xl-nowrap"><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>Contents</a></li></ul><nav id=TableOfContents><ul><li><a href=#requirements>Requirements</a></li><li><a href=#campaigns-allocation--experimentation>Campaigns, Allocation, & Experimentation</a></li><li><a href=#high-level-architecture>High-Level Architecture</a></li><li><a href=#integrating-experiments-in-the-code>Integrating Experiments in the Code</a></li><li><a href=#references>References</a></li></ul></nav></div><div class=article-container><div class=article-style><p>In the world of e-commerce, hundreds of pricing strategies or campaigns are being run simultaneously. But how do these campaigns get validated and tested before rolling out to the users? &ndash; <strong>Experimentation</strong></p><p>Experimentation allows teams to test and validate ideas quickly, from frontend changes to backend logic changes. It allows us to experiment with different variables and measure their impact.</p><p>In this blog post, let&rsquo;s take &ldquo;pricing strategies&rdquo; as an example.</p><br><h2 id=requirements>Requirements</h2><ul><li>Business users should be able to create and manage pricing campaigns.</li><li>Campaigns should target specific user segments (e.g., mobile users, users from specific regions).</li><li>The campaign & experimentation process needs an approval process.</li><li>Real-time monitoring is crucial to pause campaigns if negative impacts are detected.</li></ul><p><strong>Functional Requirements</strong></p><ul><li>Internal UI tool for managing campaigns & experiments.</li><li>Support for tartgeting user segments.</li><li>Support different types of allocation strategies (e.g., by user ID, device ID, or time-based).</li><li>Real-time data collection, monitoring, and analysis.</li></ul><p><strong>Non-functional Requirements</strong></p><ul><li>Scalability to handle large data sets and high traffic.</li><li>High availability.<ul><li>The platform must remain operational, as downtime could disrupt the variant allocation process and skew analysis results.</li></ul></li><li>Low latency for real-time response</li></ul><br><h2 id=campaigns-allocation--experimentation>Campaigns, Allocation, & Experimentation</h2><p>Campaign is usually a business rule (or it can be a machine learning model rule) that applies certain pricing strategies. The campaign should be able to target specific user segments, for example, users from mobile device, users browsing from Singapore, etc.</p><p>In A/B testing, we create an experiment with 2 groups (<strong>variants</strong>):</p><ul><li><strong>Control group</strong> (A)<ul><li>This group experiences the standard behavior, as same as others not targetted by the experiment.</li></ul></li><li><strong>Experimental group</strong> (B)<ul><li>This group experiences a special treatment.</li></ul></li></ul><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=/images/post/038/01.png alt loading=lazy data-zoomable></div></div></figure></p><p>By comparing business metrics across both groups, we can assess the experiment&rsquo;s impact.</p><p>But how do we assign users to variants? This process is called <strong>allocation</strong>. Given an incoming request with context information, we assign the request to either variant A or B. Depending on the experiment’s needs, different <strong>allocation strategy</strong> can be used.</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=/images/post/038/02.png alt loading=lazy data-zoomable></div></div></figure></p><br><h2 id=high-level-architecture>High-Level Architecture</h2><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=/post/038_pricing_experiment/featured.png alt loading=lazy data-zoomable></div></div></figure></p><br><h2 id=integrating-experiments-in-the-code>Integrating Experiments in the Code</h2><p>To integrate an experiment in the code, it typically looks like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>request</span> <span class=o>=</span>  <span class=c1># ...</span>
</span></span><span class=line><span class=cl><span class=n>ctx</span> <span class=o>=</span> <span class=n>get_context</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>  <span class=c1># Get additional contexts</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>other_condition</span> <span class=ow>and</span> <span class=n>experiment_client</span><span class=o>.</span><span class=n>determine_variant</span><span class=p>(</span><span class=n>ctx</span><span class=p>,</span> <span class=s2>&#34;EXPERIMENT-ID&#34;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&#34;B&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>plan_b</span><span class=p>()</span>  <span class=c1># B, Experimental group</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>plan_a</span><span class=p>()</span>  <span class=c1># A, Control group</span>
</span></span></code></pre></div><p>However, in pricing strategies where hundreds of campaigns may be running simultaneously, it&rsquo;s a little more complicated than this.</p><p>When a request comes in, we first need to identify all the relevant experiments the request is part of (within the targeted segment). Once we know the experiments, we can retrieve the associated campaigns and apply the appropriate pricing strategies defined by the campaigns.</p><p>This typically involves a <strong>rule engine</strong> that evaluates the request&rsquo;s context to determine the relevant experiments. To maintain real-time performance, heavy <a href=/post/020_caif/><strong>caching</strong></a> is required—running the rule engine for every single request would introduce significant latency.</p><br><h2 id=references>References</h2><br></div><div class=article-tags><a class="badge badge-light" href=/tag/platform/>Platform</a>
<a class="badge badge-light" href=/tag/data-engineering/>Data Engineering</a></div><div class=share-box><ul class=share><li><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fwitsblog.github.io%2Fpost%2F038_pricing_experiment%2F&amp;text=Pricing+Experimentation" target=_blank rel=noopener class=share-btn-twitter aria-label=twitter><i class="fab fa-twitter"></i></a></li><li><a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fwitsblog.github.io%2Fpost%2F038_pricing_experiment%2F&amp;t=Pricing+Experimentation" target=_blank rel=noopener class=share-btn-facebook aria-label=facebook><i class="fab fa-facebook"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fwitsblog.github.io%2Fpost%2F038_pricing_experiment%2F&amp;title=Pricing+Experimentation" target=_blank rel=noopener class=share-btn-linkedin aria-label=linkedin-in><i class="fab fa-linkedin-in"></i></a></li></ul></div></div></div></div></article></div><div class=page-footer><div class=container><footer class=site-footer></footer></div></div><script src=/js/vendor-bundle.min.938a3a7554cd9f6602290411f64d2617.js></script><script id=search-hit-fuse-template type=text/x-template>
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script><script src=https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin=anonymous></script><script id=page-data type=application/json>{"use_headroom":true}</script><script src=/js/wowchemy-headroom.db4755770454eb63685f8de785c0a172.js type=module></script><script src=/en/js/wowchemy.min.2945731fa88332cb0ec33cf47d29879f.js></script></body></html>